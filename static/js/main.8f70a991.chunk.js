(this.webpackJsonpmodelx=this.webpackJsonpmodelx||[]).push([[0],{55:function(e,t,n){e.exports=n(64)},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(8),l=n.n(r),c=n(37),i=n(11),u=n(10),s=n(15),p=n(16),m=n(18),f=n(101),d=n(98),h=n(65),b=n(100),v=n(103),g=n(32),E=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"path"},o.a.createElement("span",{className:"copy",onClick:function(){var t=JSON.stringify(e.props.model,null,2),n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)},title:"copy model to clipboard"},o.a.createElement("i",{className:"fas fa-copy"})),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{onClick:function(){return e.props.onNavigate([])}},this.props.name)),this.props.path.map((function(t,n){return o.a.createElement("li",{key:n},o.a.createElement("span",{onClick:function(){return e.props.onNavigate(e.props.path.slice(0,n+1))}},t))}))))}}]),t}(o.a.Component),O=n(97),y=n(92),j=n(105),k=n(99),x=n(102),C=n(104),N=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(p.a)(t).call(this,e))).state={value:e.value},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"update",value:function(e){this.setState({value:e}),this.props.model[this.props.property]=e,this.props.onChange()}},{key:"render",value:function(){var e=this;switch(typeof this.state.value){case"string":return o.a.createElement(C.a,{type:"text",label:this.props.label,value:this.state.value,margin:"normal",fullWidth:!0,onChange:function(t){return e.update(t.target.value)}});case"number":return o.a.createElement(C.a,{type:"text",label:this.props.label,value:this.state.value,margin:"normal",onChange:function(t){return e.update(t.target.value)}});case"boolean":return o.a.createElement(O.a,{margin:"normal"},o.a.createElement(j.a,null,this.props.label),o.a.createElement(x.a,{value:this.state.value?"true":"false",input:o.a.createElement(y.a,null),onChange:function(t){return e.update("true"===t.target.value)}},o.a.createElement(k.a,{value:"true"},"true"),o.a.createElement(k.a,{value:"false"},"false")));case"object":return o.a.createElement(C.a,{label:this.props.label,margin:"normal",fullWidth:!0,value:JSON.stringify(this.state.value).substr(0,1024),onClick:function(){return e.props.onNavigate(e.props.path)}})}}}]),t}(o.a.Component),w=function(){function e(){Object(i.a)(this,e)}return Object(u.a)(e,null,[{key:"locate",value:function(e,t){return t.reduce((function(e,t){return e?e[t]:void 0}),e)}}]),e}(),A=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.path,n=w.locate(this.props.model,t);return o.a.createElement("div",{className:"props"},Object.entries(n).map((function(a){return o.a.createElement("div",{key:a[0]},o.a.createElement(N,{path:t.concat([a[0]]),model:n,property:a[0],label:a[0],value:a[1],onNavigate:function(t){return e.props.onNavigate(t)},onChange:function(){return e.props.onChange()}}))})))}}]),t}(o.a.Component),D=(o.a.Component,function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("p",null,o.a.createElement("a",{href:"https://github.com/AlexAtNet/modelx"},"source code")," ~ ",o.a.createElement("a",{href:"https://github.com/AlexAtNet/modelx/issues?utf8=%E2%9C%93&q=is%3Aissue+is%3Aclosed+is%3Aenhancement"},"features")," ~ ",o.a.createElement("a",{href:"https://github.com/AlexAtNet/modelx/issues"},"issues"))}}]),t}(o.a.Component)),S=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(s.a)(this,Object(p.a)(t).call(this,e))).state={model:null,dropbox:null};var a=window.location.hash.match(/access_token=([^&]+)/)||[],o=Object(c.a)(a,2)[1];return o&&(localStorage.dropboxAccessToken=o,n.dropboxReadDir([])),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"navigate",value:function(e){this.setState({model:Object.assign({},this.state.model,{path:e})})}},{key:"load",value:function(e,t){this.setState({model:{location:e,root:t,path:[]}})}},{key:"dropboxReadDir",value:function(e){var t=this;new g.Dropbox({accessToken:localStorage.dropboxAccessToken}).filesListFolder({path:e.map((function(e){return"/"+e})).join("")}).then((function(n){var a=n.entries.filter((function(e){return"folder"===e[".tag"]})).map((function(e){return e.name})),o=n.entries.filter((function(e){return"file"===e[".tag"]})).map((function(e){return e.name}));t.setState({dropbox:{path:e,folders:a,files:o}})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=function(){if(localStorage.dropboxAccessToken)e.dropboxReadDir([]);else{var t=new g.Dropbox({clientId:"dlc05g8hb4ebuem"}).getAuthenticationUrl(window.location);window.location=t}};return o.a.createElement("div",{id:"editor",onDrop:function(t){return e.onDrop(t)},onDragOver:function(t){return e.onDragOver(t)}},function(n,a){if(!e.state.model&&!e.state.dropbox)return o.a.createElement("div",{style:{padding:"1rem"}},o.a.createElement("p",null,"Edit JSON model files in:"),o.a.createElement("div",null,o.a.createElement(f.a,{onClick:t},"Dropbox")),o.a.createElement(D,null))}(),function(){var t=e.state.dropbox;if(t&&!e.state.model)return o.a.createElement(d.a,null,t.folders.map((function(n){return o.a.createElement(h.a,{button:!0,key:n,onClick:function(){return e.dropboxReadDir(t.path.concat([n]))}},o.a.createElement(b.a,null,o.a.createElement("i",{className:"fas fa-folder"})),o.a.createElement(v.a,{primary:n}))})),t.files.map((function(n){return o.a.createElement(h.a,{button:!0,key:n,onClick:function(){return function(t){var n=t.map((function(e){return"/"+e})).join("");new g.Dropbox({accessToken:localStorage.dropboxAccessToken}).filesDownload({path:n}).then((function(t){var a=new FileReader;a.addEventListener("loadend",(function(){e.load(n,JSON.parse(a.result))})),a.readAsText(t.fileBlob)})).catch((function(e){return console.log(e)}))}(t.path.concat([n]))}},o.a.createElement(b.a,null,o.a.createElement("i",{className:"fas fa-file"})),o.a.createElement(v.a,{primary:n}))})))}(),function(){var t=e.state.model;if(t)return o.a.createElement(E,{name:t.location,path:t.path,model:t.root,onNavigate:function(t){return e.navigate(t)}})}(),function(){var t=e.state.model;if(t)return o.a.createElement(A,{path:t.path,model:t.root,onNavigate:function(t){return e.navigate(t)},onChange:function(){new g.Dropbox({accessToken:localStorage.dropboxAccessToken}).filesUpload({path:e.state.model.location,mode:{".tag":"overwrite"},contents:JSON.stringify(e.state.model.root,null,2)}).then((function(){return console.log("saved")})).catch((function(e){return console.log(e)}))}})}())}}]),t}(o.a.Component);n(63);l.a.render(o.a.createElement(S,null),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.8f70a991.chunk.js.map